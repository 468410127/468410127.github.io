(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25a57b10"],{"0122":function(e,r,t){},"5b8c":function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("div",{staticClass:"reset-container"},[t("el-form",{ref:"resetForm",staticClass:"reset-form",attrs:{model:e.resetForm,rules:e.resetFormRules,autocomplete:"off","label-position":"left"}},[t("div",{staticClass:"title"},[e._v("\n        欢迎登录后台管理系统\n      ")]),t("el-card",{staticClass:"reset-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"reset-tab"},[t("div",{staticClass:"tab-item"},[e._v("\n            重置密码\n          ")])]),t("el-form-item",{staticClass:"reset-input-item",attrs:{prop:"phoneNumber"}},[t("el-input",{attrs:{name:"phoneNumber",type:"text",placeholder:"请输入手机号"},model:{value:e.resetForm.phoneNumber,callback:function(r){e.$set(e.resetForm,"phoneNumber",r)},expression:"resetForm.phoneNumber"}})],1),t("el-form-item",{staticClass:"reset-input-item",attrs:{prop:"code"}},[t("el-input",{attrs:{type:"number",name:"code",placeholder:"请输入短信验证码",maxlength:"4"},model:{value:e.resetForm.code,callback:function(r){e.$set(e.resetForm,"code",r)},expression:"resetForm.code"}}),t("span",{staticClass:"code",style:{cursor:e.isOvertime?"default":"pointer"},on:{click:e.sendMessage}},[e._v(e._s(e.word))])],1),t("el-form-item",{staticClass:"reset-input-item",attrs:{prop:"newPassword"}},[t("el-input",{attrs:{"show-password":"",name:"newPassword",placeholder:"设置新的登录密码(数字+字母，最少6位)"},model:{value:e.resetForm.newPassword,callback:function(r){e.$set(e.resetForm,"newPassword",r)},expression:"resetForm.newPassword"}})],1),t("el-form-item",{staticClass:"reset-input-item",attrs:{prop:"confirmPassword"}},[t("el-input",{attrs:{name:"confirmPassword","show-password":"",placeholder:"再次输入登录密码"},on:{blur:e.confirmPsw},model:{value:e.resetForm.confirmPassword,callback:function(r){e.$set(e.resetForm,"confirmPassword",r)},expression:"resetForm.confirmPassword"}})],1),t("el-form-item",{staticStyle:{"margin-bottom":"0"}},[t("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.handleReset(r)}}},[e._v("\n            重 置\n          ")])],1),t("div",{staticClass:"to-login"},[t("span",{staticClass:"btn",on:{click:function(r){return e.$router.push({name:"Login"})}}},[e._v("立即登录")])])],1)],1)],1)])},o=[];t("4917");function n(e){var r=/^1[34578]\d{9}$/;return r.test(e)}function a(e){var r=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;return r.test(e)}function i(e){var r=/^\d{6}$/;return r.test(e)}var c={name:"Reset",data:function(){var e=function(e,r,t){n(r)?t():t(new Error("手机号格式不正确"))},r=function(e,r,t){a(r)?t():t(new Error("密码必须是数字+字母的组合，最少6位，最多20位"))},t=function(e,r,t){i(r)?t():t(new Error("请输入正确的验证码"))};return{resetForm:{phoneNumber:"",code:"",newPassword:"",confirmPassword:""},resetFormRules:{phoneNumber:[{required:!0,trigger:"blur",validator:e}],code:[{required:!0,trigger:"blur",validator:t}],newPassword:[{required:!0,trigger:"blur",validator:r}],confirmPassword:[{required:!0,trigger:"blur",validator:r}]},loading:!1,redirect:void 0,word:"获取验证码",isOvertime:!1,time:60,checked:!1}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{confirmPsw:function(){this.resetForm.newPassword!==this.resetForm.confirmPassword&&(this.$message.closeAll(),this.$message.warning("两次密码输入不一致"))},sendMessage:function(){var e=this;if(this.isOvertime)return!1;var r={phone:this.resetForm.phoneNumber};return r.phone?n(r.phone)?(this.loading=!0,void this.$request.httpRequest({method:"post",url:this.API.SendSms,returnFullData:!0,noLoading:!0,hideErrorMsg:!0,params:r,success:function(r){e.loading=!1,e.$message.closeAll(),e.$message.success("验证码发送成功，请留意手机短信");var t=setInterval(function(){e.isOvertime=!0,e.word="".concat(e.time,"s后重新获取"),e.time--,e.time<=0&&(e.isOvertime=!1,e.time=60,clearInterval(t),e.word="获取验证码")},1e3)},error:function(r){e.loading=!1;var t=r.hasOwnProperty("resultMessage")?r.resultMessage:"获取验证码失败";e.$message({message:t,type:"error",customClass:"errorloginwidth",duration:3e3})}})):(this.$message.closeAll(),void this.$message.error("手机号格式不正确")):(this.$message.closeAll(),void this.$message.error("请先输入手机号码"))},handleReset:function(){var e=this;this.$refs.resetForm.validate(function(r){if(!r)return!1;e.loading=!0;var t={phone:e.resetForm.phoneNumber,password:e.resetForm.newPassword,vin:e.resetForm.code};e.$request.httpRequest({method:"post",url:e.API.ResetPwd,returnFullData:!0,noLoading:!0,params:t,success:function(r){e.$message.closeAll(),e.$message.success("恭喜重置密码成功，请用新密码登录"),e.loading=!1,e.$router.push({name:"Login"})},error:function(r){e.loading=!1}})})}}},l=c,u=(t("a961"),t("d5c8"),t("2877")),m=Object(u["a"])(l,s,o,!1,null,"27c56f59",null);r["default"]=m.exports},9513:function(e,r,t){e.exports={menuText:"#bfcbd9",menuActiveText:"#409eff",subMenuActiveText:"#f4f4f5",menuBg:"#304156",menuHover:"#263445",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"3.88889rem"}},a961:function(e,r,t){"use strict";var s=t("9513"),o=t.n(s);o.a},d5c8:function(e,r,t){"use strict";var s=t("0122"),o=t.n(s);o.a}}]);